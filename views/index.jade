extends layout

block content
  if crumbs
    .ui.container.fixed.sticky
      .ui.segment.clearing
        .ui.breadcrumb
          each crumb in crumbs
            span.divider /
            a.section(class=crumb.active ? 'active' : '' href=crumb.path)
              span= crumb.name
        if is_admin
          .ui.label.teal.top.right.attached
            span Admin

  .ui.list.directories
    each dir in dirs
      a.item(href='/#{dir.rpath}')
        i.folder.icon
        .content= dir.name

    .ui.divider

  unless files.length
    h3 No images
  else
    .ui.four.column.grid
      each file in files
        .column
          a.ui.fluid.card(href='/img/#{file.rpath}' target='_blank')
            .ui.image(class=file.hidden ? 'disabled' : '')
              img(src='/preview/#{file.rpath}')
            .content
              span= file.name

            if is_admin
              if file.hidden
                form.extra.content(action='/show' method='post')
                  input(type='hidden' name='directory' value='#{directory}')
                  button.mini.ui.button.right.floated(type='submit' name='file' value='#{file.name}') Show
              else
                form.extra.content(action='/hide' method='post')
                  input(type='hidden' name='directory' value='#{directory}')
                  button.mini.ui.button.right.floated(type='submit' name='file' value='#{file.name}') Hide
